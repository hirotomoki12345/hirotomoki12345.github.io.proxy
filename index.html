<!DOCTYPE html>
<html>
<head>
  <title>プロキシサイト</title>
</head>
<body>
  <h1>プロキシサイト</h1>
  <div class="container">
    <input type="text" id="urlInput" class="input-field" placeholder="ページを埋め込むリンクを入力してください (https://を含む)">
    <button id="submitBtn" class="submit-btn">埋め込む</button>
  </div>
  <div id="resultContainer"></div>
  <script>
    (function () {
      // ボタンをクリックした時の処理を設定
      var submitBtn = document.getElementById("submitBtn");
      submitBtn.addEventListener("click", function () {
        var url = document.getElementById("urlInput").value;

        // Use the Fetch API to fetch the content
        fetch(url)
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.text();
          })
          .then(content => {
            // Create an iframe and set the fetched content as its source
            var iframe = document.createElement("iframe");
            iframe.style.border = "none";
            iframe.style.width = "100%";
            iframe.style.height = "100vh";
            iframe.style.margin = "0";
            iframe.referrerpolicy = "no-referrer";
            iframe.allow = "fullscreen";
            iframe.srcdoc = content; // Set the fetched content as srcdoc

            // Remove previous result if any
            var resultContainer = document.getElementById("resultContainer");
            while (resultContainer.firstChild) {
              resultContainer.removeChild(resultContainer.firstChild);
            }

            // Append the iframe to the result container
            resultContainer.appendChild(iframe);
          })
          .catch(error => {
            alert('Error fetching content: ' + error.message);
          });
      });
    })();
  </script>
</body>
</html>
