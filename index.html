<!DOCTYPE html>
<html>
<head>
  <title>プロキシサイト</title>
</head>
<body>
  <h1>プロキシサイト</h1>
  <script>
    (function () {
      // ... Your existing JavaScript code ...
      
      // ボタンをクリックした時の処理を設定
      submitBtn.addEventListener("click", function () {
        var url = inputField.value;
        
        // Make an AJAX request to the PHP script to fetch the content
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
          if (xhr.readyState === XMLHttpRequest.DONE) {
            if (xhr.status === 200) {
              // Create a new window and display the fetched content in an iframe
              var win = window.open();
              win.document.body.style.margin = "0";
              win.document.body.style.height = "100vh";
              var iframe = win.document.createElement("iframe");
              iframe.style.border = "none";
              iframe.style.width = "100%";
              iframe.style.height = "100%";
              iframe.style.margin = "0";
              iframe.referrerpolicy = "no-referrer";
              iframe.allow = "fullscreen";
              iframe.srcdoc = xhr.responseText; // Set the fetched content as srcdoc
              win.document.body.appendChild(iframe);
            } else {
              alert('Error fetching content: ' + xhr.statusText);
            }
          }
        };
        xhr.open('GET', 'proxy.php?url=' + encodeURIComponent(url), true);
        xhr.send();
      });

      // ... Your existing JavaScript code ...
    })();
  </script>
</body>
</html>
